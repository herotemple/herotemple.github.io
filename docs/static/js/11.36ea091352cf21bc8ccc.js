webpackJsonp([11],{GF4k:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={name:"Login",data:function(){return{form:{userName:"",userPwd:""},formEmail:{email:"",code:""},isCounting:!1,countdown:60,timer:null}},methods:{login:function(){var e=this;this.form.userName&&this.form.userPwd?this.$http.get("/user/login2",{params:this.form}).then(function(t){200===t.data.code?(e.$message.success("登录成功！"),localStorage.setItem("name",e.form.userName),e.$router.push("/index")):e.$message.error(t.data.msg)}):this.$message.error("请输入用户名和密码！")},goToRegister:function(){this.$router.push("/register")},sendEmailCode:function(){var e=this;this.formEmail.email?this.$http.get("/user/sendCode",{params:{email:this.formEmail.email}}).then(function(t){200===t.data.code?(e.$message.success("验证码已发送，请检查邮箱！"),e.timer&&clearInterval(e.timer),e.isCounting=!0,e.countdown=60,e.timer=setInterval(function(){e.countdown>1?e.countdown--:(clearInterval(e.timer),e.isCounting=!1,e.countdown=60)},1e3)):e.$message.error("验证码发送失败："+t.data.msg)}).catch(function(t){e.$message.error("请求失败："+t.message)}):this.$message.error("请输入邮箱！")},loginWithEmail:function(){this.formEmail.email&&this.formEmail.code?(this.$message.success("登录成功！"),this.$router.push("/index")):this.$message.error("请输入邮箱和验证码！")}},beforeDestroy:function(){this.timer&&clearInterval(this.timer)}},r={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login-container"},[s("div",{staticClass:"login-box"},[s("h1",{staticClass:"title"},[e._v("个人空间登录")]),e._v(" "),s("el-tabs",{attrs:{type:"border-card"}},[s("el-tab-pane",{attrs:{label:"用户登录"}},[s("el-form",{staticClass:"login-form",attrs:{"label-width":"80px"}},[s("el-form-item",{attrs:{label:"用户名"}},[s("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"密码"}},[s("el-input",{attrs:{"show-password":"",placeholder:"请输入密码"},model:{value:e.form.userPwd,callback:function(t){e.$set(e.form,"userPwd",t)},expression:"form.userPwd"}})],1)],1),e._v(" "),s("div",{staticClass:"btn-group"},[s("el-button",{attrs:{type:"primary",icon:"el-icon-s-custom",size:"medium"},on:{click:e.login}},[e._v("登录")])],1),e._v(" "),s("div",{staticClass:"btn-group"},[s("el-button",{attrs:{type:"text",size:"medium"},on:{click:e.goToRegister}},[e._v("还没有账号？去注册")])],1)],1),e._v(" "),s("el-tab-pane",{attrs:{label:"邮箱登录"}},[s("el-form",{staticClass:"login-form",attrs:{"label-width":"80px"}},[s("el-form-item",{attrs:{label:"邮箱"}},[s("el-input",{attrs:{placeholder:"请输入邮箱"},model:{value:e.formEmail.email,callback:function(t){e.$set(e.formEmail,"email",t)},expression:"formEmail.email"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"验证码"}},[s("el-input",{attrs:{placeholder:"请输入验证码"},scopedSlots:e._u([{key:"append",fn:function(){return[s("el-button",{attrs:{type:"primary",size:"small",disabled:e.isCounting},on:{click:e.sendEmailCode}},[e._v("\n                  "+e._s(e.isCounting?e.countdown+"秒":"获取验证码")+"\n                ")])]},proxy:!0}]),model:{value:e.formEmail.code,callback:function(t){e.$set(e.formEmail,"code",t)},expression:"formEmail.code"}})],1)],1),e._v(" "),s("div",{staticClass:"btn-group"},[s("el-button",{attrs:{type:"primary",icon:"el-icon-s-custom",size:"medium"},on:{click:e.loginWithEmail}},[e._v("登录")])],1)],1)],1)],1)])},staticRenderFns:[]};var a=s("VU/8")(i,r,!1,function(e){s("oih+")},"data-v-7ef244d0",null);t.default=a.exports},"oih+":function(e,t){}});
//# sourceMappingURL=11.36ea091352cf21bc8ccc.js.map