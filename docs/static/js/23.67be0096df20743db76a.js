webpackJsonp([23],{QQ8w:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("Dd8w"),r=n.n(o),a=n("mtWM"),i=n("XLwt"),s={data:function(){return{inventory:[],searchQuery:"",selectedCategory:"",selectedProduct:{name:"",type:"",number:0},outboundQuantity:""}},computed:{filteredInventory:function(){var t=this;return this.inventory.filter(function(e){return(!t.searchQuery||e.name.includes(t.searchQuery))&&(!t.selectedCategory||e.type===t.selectedCategory)})}},mounted:function(){this.fetchInventory()},methods:{fetchInventory:function(){var t=this;a.a.get("/product/select").then(function(e){Array.isArray(e.data)&&(t.inventory=e.data,t.$nextTick(function(){t.renderStockChart()}))}).catch(function(t){console.error("获取库存数据失败:",t)})},selectProduct:function(t){this.selectedProduct=r()({},t)},processOutbound:function(){var t=this;this.selectedProduct.name&&this.outboundQuantity?this.outboundQuantity>this.selectedProduct.number?alert("出库数量不能大于库存！"):a.a.post("/product/out",{name:this.selectedProduct.name,type:this.selectedProduct.type,number:this.outboundQuantity}).then(function(){alert("商品出库成功！"),t.fetchInventory()}).catch(function(t){console.error("出库失败:",t)}):alert("请完整填写出库信息")},renderStockChart:function(){var t=i.init(document.getElementById("stockChart")),e={title:{text:"库存趋势",textStyle:{color:"#fff"}},xAxis:{type:"category",data:this.inventory.map(function(t){return t.name}),axisLine:{lineStyle:{color:"#fff"}},axisLabel:{color:"#fff",fontSize:12,rotate:45,interval:0,formatter:function(t){return t.length>10?t.slice(0,10)+"...":t}}},yAxis:{type:"value",axisLine:{lineStyle:{color:"#fff"}}},series:[{name:"库存数量",data:this.inventory.map(function(t){return Number(t.number)}),type:"bar",itemStyle:{color:"#0ff"}}]};t.setOption(e)}}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"outbound-container"},[n("h2",{staticClass:"page-title"},[t._v("商品出库")]),t._v(" "),n("div",{staticClass:"filter-container"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.searchQuery,expression:"searchQuery"}],staticClass:"filter-input",attrs:{placeholder:"搜索商品名称"},domProps:{value:t.searchQuery},on:{input:function(e){e.target.composing||(t.searchQuery=e.target.value)}}}),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedCategory,expression:"selectedCategory"}],staticClass:"filter-select",on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selectedCategory=e.target.multiple?n:n[0]}}},[n("option",{attrs:{value:""}},[t._v("所有类别")]),t._v(" "),n("option",{attrs:{value:"电子产品"}},[t._v("电子产品")]),t._v(" "),n("option",{attrs:{value:"家具"}},[t._v("家具")]),t._v(" "),n("option",{attrs:{value:"日用"}},[t._v("日用")]),t._v(" "),n("option",{attrs:{value:"食品"}},[t._v("食品")])]),t._v(" "),n("button",{staticClass:"action-button",on:{click:t.fetchInventory}},[t._v("刷新数据")])]),t._v(" "),n("div",{staticClass:"outbound-form"},[n("h3",[t._v("出库操作")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedProduct.name,expression:"selectedProduct.name"}],staticClass:"form-input",attrs:{placeholder:"商品名称",readonly:""},domProps:{value:t.selectedProduct.name},on:{input:function(e){e.target.composing||t.$set(t.selectedProduct,"name",e.target.value)}}}),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedProduct.type,expression:"selectedProduct.type"}],staticClass:"form-input",attrs:{disabled:""},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.selectedProduct,"type",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:""}},[t._v("选择类别")]),t._v(" "),n("option",{attrs:{value:"电子产品"}},[t._v("电子产品")]),t._v(" "),n("option",{attrs:{value:"家具"}},[t._v("家具")]),t._v(" "),n("option",{attrs:{value:"日用"}},[t._v("日用")]),t._v(" "),n("option",{attrs:{value:"食品"}},[t._v("食品")])]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.outboundQuantity,expression:"outboundQuantity"}],staticClass:"form-input",attrs:{type:"number",placeholder:"出库数量"},domProps:{value:t.outboundQuantity},on:{input:function(e){e.target.composing||(t.outboundQuantity=e.target.value)}}}),t._v(" "),n("button",{staticClass:"action-button",on:{click:t.processOutbound}},[t._v("确认出库")])]),t._v(" "),n("div",{staticClass:"inventory-list"},t._l(t.filteredInventory,function(e){return n("div",{key:e.id,staticClass:"inventory-item",on:{click:function(n){return t.selectProduct(e)}}},[n("div",{staticClass:"inventory-info"},[n("h3",{staticClass:"product-name"},[t._v(t._s(e.name))]),t._v(" "),n("p",{staticClass:"product-category"},[t._v("类别: "+t._s(e.type))]),t._v(" "),n("p",{staticClass:"product-stock"},[t._v("库存: "+t._s(e.number))])])])}),0),t._v(" "),t._m(0)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"chart-container"},[e("h3",[this._v("库存趋势")]),this._v(" "),e("div",{attrs:{id:"stockChart"}})])}]};var u=n("VU/8")(s,c,!1,function(t){n("mM9I")},"data-v-152040ea",null);e.default=u.exports},mM9I:function(t,e){}});
//# sourceMappingURL=23.67be0096df20743db76a.js.map