webpackJsonp([12],{"0hre":function(e,t){},XZH8:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("Dd8w"),r=s.n(i),n={name:"Role",data:function(){return{searchKey:"",permissions:[],dialogVisible:!1,currentPermission:{}}},computed:{filteredPermissions:function(){var e=this;return this.permissions.filter(function(t){return t.userName.includes(e.searchKey)})}},methods:{fetchPermissions:function(){var e=this;this.$http.get("/permission/query").then(function(t){Array.isArray(t.data)&&(e.permissions=t.data)}).catch(function(){e.$message.error("è·å–æƒé™åˆ—è¡¨å¤±è´¥ï¼")})},editPermission:function(e){this.currentPermission=r()({},e),this.dialogVisible=!0},savePermission:function(){var e=this,t=this.currentPermission,s=t.id,i=t.role,r=t.permission;this.$http.post("/permission/update",{id:s,role:i,permission:r}).then(function(t){200===t.status?(e.$message.success("æƒé™æ›´æ–°æˆåŠŸï¼"),e.fetchPermissions(),e.dialogVisible=!1):e.$message.error("æ›´æ–°å¤±è´¥ï¼")}).catch(function(){e.$message.error("ç½‘ç»œé”™è¯¯ï¼Œæ— æ³•æ›´æ–°æƒé™ï¼")})}},mounted:function(){this.fetchPermissions()}},a={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"role-container"},[s("el-card",{staticClass:"role-card"},[s("div",{staticClass:"role-header"},[s("el-input",{staticClass:"search-input",attrs:{placeholder:"ğŸ” è¯·è¾“å…¥ç”¨æˆ·å",clearable:""},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}})],1),e._v(" "),s("el-table",{staticClass:"role-table",attrs:{data:e.filteredPermissions,border:""}},[s("el-table-column",{attrs:{prop:"id",label:"ID",width:"80",align:"center"}}),e._v(" "),s("el-table-column",{attrs:{prop:"userName",label:"ç”¨æˆ·å","min-width":"180",align:"center"}}),e._v(" "),s("el-table-column",{attrs:{prop:"role",label:"ç”¨æˆ·è§’è‰²","min-width":"180",align:"center"}}),e._v(" "),s("el-table-column",{attrs:{prop:"permission",label:"ç”¨æˆ·æƒé™","min-width":"300"}}),e._v(" "),s("el-table-column",{attrs:{label:"æ“ä½œ",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.editPermission(i)}}},[e._v("ç¼–è¾‘æƒé™")])]}}])})],1),e._v(" "),s("el-pagination",{staticClass:"pagination",attrs:{background:"",layout:"prev, pager, next",total:e.permissions.length,"page-size":5}})],1),e._v(" "),s("el-dialog",{attrs:{title:"ç¼–è¾‘ç”¨æˆ·æƒé™",visible:e.dialogVisible,width:"500px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[s("el-form",{attrs:{"label-width":"100px"}},[s("el-form-item",{attrs:{label:"ç”¨æˆ·å"}},[s("el-input",{attrs:{disabled:""},model:{value:e.currentPermission.userName,callback:function(t){e.$set(e.currentPermission,"userName",t)},expression:"currentPermission.userName"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"ç”¨æˆ·è§’è‰²"}},[s("el-select",{staticClass:"full-width",attrs:{placeholder:"è¯·é€‰æ‹©è§’è‰²"},model:{value:e.currentPermission.role,callback:function(t){e.$set(e.currentPermission,"role",t)},expression:"currentPermission.role"}},[s("el-option",{attrs:{label:"ç®¡ç†å‘˜",value:"admin"}}),e._v(" "),s("el-option",{attrs:{label:"æ™®é€šç”¨æˆ·",value:"user"}}),e._v(" "),s("el-option",{attrs:{label:"è®¿å®¢",value:"guest"}})],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"ç”¨æˆ·æƒé™"}},[s("el-input",{attrs:{placeholder:"è¯·è¾“å…¥ç”¨æˆ·æƒé™"},model:{value:e.currentPermission.permission,callback:function(t){e.$set(e.currentPermission,"permission",t)},expression:"currentPermission.permission"}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("å–æ¶ˆ")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.savePermission}},[e._v("ä¿å­˜")])],1)],1)],1)},staticRenderFns:[]};var l=s("VU/8")(n,a,!1,function(e){s("0hre")},"data-v-743230a1",null);t.default=l.exports}});
//# sourceMappingURL=12.60fb5f6a7374011c47b4.js.map