webpackJsonp([13],{pNcY:function(t,a){},waZr:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("mvHQ"),r=e.n(n),i=e("c/Tr"),s=e.n(i),o=e("lHA8"),c=e.n(o),l=e("Gu7T"),h=e.n(l),u=e("XLwt"),p={data:function(){return{loading:!1,rawData:[],chartData:[],chartInstance:null,selectedYear:null}},mounted:function(){this.loadReport(null)},methods:{loadReport:function(t){var a=this;this.loading=!0;var e={};null!==t&&void 0!==t&&(e.year=parseInt(t,10)),this.$http.get("/core/monthly",{params:e}).then(function(t){a.loading=!1,console.log("接口返回 res =",t);var e=t.data||t.body||[];Array.isArray(e)?(a.rawData=e,a.processData(),a.$nextTick(function(){a.renderChart()})):alert("获取数据失败")}).catch(function(t){a.loading=!1,console.error("请求出错:",t),alert("请求出错")})},processData:function(){var t=this,a=[].concat(h()(new c.a(this.rawData.map(function(t){return t.type})))),e=s()({length:12},function(t,a){return a+1}),n=a.map(function(a){return{name:a,type:"bar",stack:"total",emphasis:{focus:"series"},data:e.map(function(e){var n=t.rawData.find(function(t){return parseInt(t.month)===e&&t.type===a});return n?n.count:0})}});console.log("months:",e),console.log("types:",a),console.log("series:",r()(n,null,2)),this.chartData={months:e,types:a,series:n}},renderChart:function(){var t=this.$refs.echarts;if(t)if(this.chartInstance&&this.chartInstance.dispose(),this.chartInstance=u.init(t),this.chartData&&this.chartData.series&&0!==this.chartData.series.length){var a={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:this.chartData.types,top:"bottom"},grid:{left:"3%",right:"4%",bottom:"12%",containLabel:!0},xAxis:{type:"category",data:this.chartData.months.map(function(t){return t+"月"})},yAxis:{type:"value"},series:this.chartData.series};this.chartInstance.setOption(a)}else console.warn("series 数据为空，图表不渲染");else console.warn("echarts 容器未找到")}},beforeDestroy:function(){this.chartInstance&&(this.chartInstance.dispose(),this.chartInstance=null)}},d={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"report-page",staticStyle:{padding:"20px","max-width":"1000px",margin:"auto"}},[e("h2",[t._v("岩芯样本月度统计报表（全部年份）")]),t._v(" "),e("div",{staticStyle:{"margin-bottom":"20px"}},[e("button",{staticStyle:{padding:"6px 12px","margin-right":"10px"},on:{click:function(a){return t.loadReport(null)}}},[t._v("全部年份")]),t._v(" "),t._l([2022,2023,2024],function(a){return e("button",{key:a,staticStyle:{padding:"6px 12px","margin-right":"5px"},on:{click:function(e){return t.loadReport(a)}}},[t._v("\n      "+t._s(a)+"\n    ")])})],2),t._v(" "),t.loading?e("div",{staticStyle:{"text-align":"center","font-size":"16px",color:"#888"}},[t._v("加载中...")]):e("div",[t.chartData&&0!==t.chartData.length?t._e():e("div",{staticStyle:{"text-align":"center",color:"#888"}},[t._v("暂无数据")]),t._v(" "),e("div",{ref:"echarts",staticStyle:{height:"400px",width:"100%"}})])])},staticRenderFns:[]};var f=e("VU/8")(p,d,!1,function(t){e("pNcY")},"data-v-6fbeda00",null);a.default=f.exports}});
//# sourceMappingURL=13.5ce6712fa2a4ed3493c0.js.map